<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[ReactÁü•ËØÜÁÇπ]]></title>
    <url>%2F2020%2F08%2F03%2FReact%E7%9F%A5%E8%AF%86%E7%82%B9%2F</url>
    <content type="text"><![CDATA[# 1. React ÁîüÂëΩÂë®ÊúüÊúâÂì™‰∫õÔºå16 ÁâàÊú¨ÁîüÂëΩÂë®ÊúüÂèëÁîü‰∫ÜÂì™‰∫õÂèòÂåñÔºü # 15 ÁîüÂëΩÂë®Êúü ÂàùÂßãÂåñÈò∂ÊÆµ constructor ÊûÑÈÄ†ÂáΩÊï∞ getDefaultPropsprops ÈªòËÆ§ÂÄº getInitialStatestate ÈªòËÆ§ÂÄº ÊåÇËΩΩÈò∂ÊÆµ componentWillMount ÁªÑ‰ª∂ÂàùÂßãÂåñÊ∏≤ÊüìÂâçË∞ÉÁî® render ÁªÑ‰ª∂Ê∏≤Êüì componentDidMount ÁªÑ‰ª∂ÊåÇËΩΩÂà∞ DOM ÂêéË∞ÉÁî® Êõ¥Êñ∞Èò∂ÊÆµ componentWillReceiveProps ÁªÑ‰ª∂Â∞ÜË¶ÅÊé•Êî∂Êñ∞ props ÂâçË∞ÉÁî® shouldComponentUpdate ÁªÑ‰ª∂ÊòØÂê¶ÈúÄË¶ÅÊõ¥Êñ∞ componentWillUpdate ÁªÑ‰ª∂Êõ¥Êñ∞ÂâçË∞ÉÁî® render ÁªÑ‰ª∂Ê∏≤Êüì componentDidUpdate ÁªÑ‰ª∂Êõ¥Êñ∞ÂêéË∞ÉÁî® Âç∏ËΩΩÈò∂ÊÆµ componentWillUnmount ÁªÑ‰ª∂Âç∏ËΩΩÂâçË∞ÉÁî® # 16 ÁîüÂëΩÂë®Êúü ÂàùÂßãÂåñÈò∂ÊÆµ constructor ÊûÑÈÄ†ÂáΩÊï∞ getDefaultPropsprops ÈªòËÆ§ÂÄº getInitialStatestate ÈªòËÆ§ÂÄº ÊåÇËΩΩÈò∂ÊÆµ static getDerivedStateFromProps(props,state) render componentDidMount getDerivedStateFromPropsÔºöÁªÑ‰ª∂ÊØèÊ¨°Ë¢´ rerender ÁöÑÊó∂ÂÄôÔºåÂåÖÊã¨Âú®ÁªÑ‰ª∂ÊûÑÂª∫‰πãÂêé (ËôöÊãü dom ‰πãÂêéÔºåÂÆûÈôÖ dom ÊåÇËΩΩ‰πãÂâç)ÔºåÊØèÊ¨°Ëé∑ÂèñÊñ∞ÁöÑ props Êàñ state ‰πãÂêéÔºõÊØèÊ¨°Êé•Êî∂Êñ∞ÁöÑ props ‰πãÂêéÈÉΩ‰ºöËøîÂõû‰∏Ä‰∏™ÂØπË±°‰Ωú‰∏∫Êñ∞ÁöÑ stateÔºåËøîÂõû null ÂàôËØ¥Êòé‰∏çÈúÄË¶ÅÊõ¥Êñ∞ stateÔºõÈÖçÂêà componentDidUpdateÔºåÂèØ‰ª•Ë¶ÜÁõñ componentWillReceiveProps ÁöÑÊâÄÊúâÁî®Ê≥ï„ÄÇ Êõ¥Êñ∞Èò∂ÊÆµ static getDerivedStateFromProps(props,state) shouldComponentUpdate render getSnapshotBeforeUpdate(prevProps,prevState) componentDidUpdate getSnapshotBeforeUpdateÔºöËß¶ÂèëÊó∂Èó¥: update ÂèëÁîüÁöÑÊó∂ÂÄôÔºåÂú® render ‰πãÂêéÔºåÂú®ÁªÑ‰ª∂ dom Ê∏≤Êüì‰πãÂâçÔºõËøîÂõû‰∏Ä‰∏™ÂÄºÔºå‰Ωú‰∏∫ componentDidUpdate ÁöÑÁ¨¨‰∏â‰∏™ÂèÇÊï∞ÔºõÈÖçÂêà componentDidUpdate, ÂèØ‰ª•Ë¶ÜÁõñ componentWillUpdate ÁöÑÊâÄÊúâÁî®Ê≥ï„ÄÇ Âç∏ËΩΩÈò∂ÊÆµ componentWillUnmount ÈîôËØØÂ§ÑÁêÜ componentDidCatch React16 Êñ∞ÁöÑÁîüÂëΩÂë®ÊúüÂºÉÁî®‰∫Ü componentWillMount„ÄÅcomponentWillReceivePorpsÔºåcomponentWillUpdate Êñ∞Â¢û‰∫Ü getDerivedStateFromProps„ÄÅgetSnapshotBeforeUpdate Êù•‰ª£ÊõøÂºÉÁî®ÁöÑ‰∏â‰∏™Èí©Â≠êÂáΩÊï∞„ÄÇ React16 Âπ∂Ê≤°ÊúâÂà†Èô§Ëøô‰∏â‰∏™Èí©Â≠êÂáΩÊï∞Ôºå‰ΩÜÊòØ‰∏çËÉΩÂíåÊñ∞Â¢ûÁöÑÈí©Â≠êÂáΩÊï∞Ê∑∑Áî®Ôºå React17 Â∞Ü‰ºöÂà†Èô§Ëøô‰∏â‰∏™Èí©Â≠êÂáΩÊï∞ÔºåÊñ∞Â¢û‰∫ÜÂØπÈîôËØØÁöÑÂ§ÑÁêÜÔºà componentDidCatchÔºâ„ÄÇ # 2. setState ÊòØÂêåÊ≠•ÁöÑËøòÊòØÂºÇÊ≠•ÁöÑÔºü ÁîüÂëΩÂë®ÊúüÂíåÂêàÊàê‰∫ã‰ª∂‰∏≠ Âú® React ÁöÑÁîüÂëΩÂë®ÊúüÂíåÂêàÊàê‰∫ã‰ª∂‰∏≠Ôºå React ‰ªçÁÑ∂Â§Ñ‰∫é‰ªñÁöÑÊõ¥Êñ∞Êú∫Âà∂‰∏≠ÔºåËøôÊó∂Êó†ËÆ∫Ë∞ÉÁî®Â§öÂ∞ëÊ¨° setStateÔºåÈÉΩ‰ºö‰∏ç‰ºöÁ´ãÂç≥ÊâßË°åÊõ¥Êñ∞ÔºåËÄåÊòØÂ∞ÜË¶ÅÊõ¥Êñ∞ÁöÑ„ÉªÂ≠òÂÖ• _pendingStateQueueÔºåÂ∞ÜË¶ÅÊõ¥Êñ∞ÁöÑÁªÑ‰ª∂Â≠òÂÖ• dirtyComponent„ÄÇ ÂΩì‰∏ä‰∏ÄÊ¨°Êõ¥Êñ∞Êú∫Âà∂ÊâßË°åÂÆåÊØïÔºå‰ª•ÁîüÂëΩÂë®Êúü‰∏∫‰æãÔºåÊâÄÊúâÁªÑ‰ª∂ÔºåÂç≥ÊúÄÈ°∂Â±ÇÁªÑ‰ª∂ didmount Âêé‰ºöÂ∞ÜÊâπÂ§ÑÁêÜÊ†áÂøóËÆæÁΩÆ‰∏∫ false„ÄÇËøôÊó∂Â∞ÜÂèñÂá∫ dirtyComponent ‰∏≠ÁöÑÁªÑ‰ª∂‰ª•Âèä _pendingStateQueue ‰∏≠ÁöÑ state ËøõË°åÊõ¥Êñ∞„ÄÇËøôÊ†∑Â∞±ÂèØ‰ª•Á°Æ‰øùÁªÑ‰ª∂‰∏ç‰ºöË¢´ÈáçÊñ∞Ê∏≤ÊüìÂ§öÊ¨°„ÄÇ 123456componentDidMount() &#123;this.setState(&#123; index: this.state.index + 1&#125;)console.log(&apos;state&apos;, this.state.index);&#125; ÊâÄ‰ª•ÔºåÂ¶Ç‰∏äÈù¢ÁöÑ‰ª£Á†ÅÔºåÂΩìÊàë‰ª¨Âú®ÊâßË°å setState ÂêéÁ´ãÂç≥ÂéªËé∑Âèñ stateÔºåËøôÊó∂ÊòØËé∑Âèñ‰∏çÂà∞Êõ¥Êñ∞ÂêéÁöÑ state ÁöÑÔºåÂõ†‰∏∫Â§Ñ‰∫é React ÁöÑÊâπÂ§ÑÁêÜÊú∫Âà∂‰∏≠Ôºå state Ë¢´ÊöÇÂ≠òËµ∑Êù•ÔºåÂæÖÊâπÂ§ÑÁêÜÊú∫Âà∂ÂÆåÊàê‰πãÂêéÔºåÁªü‰∏ÄËøõË°åÊõ¥Êñ∞„ÄÇ ÊâÄ‰ª•„ÄÇsetState Êú¨Ë∫´Âπ∂‰∏çÊòØÂºÇÊ≠•ÁöÑÔºåËÄåÊòØ React ÁöÑÊâπÂ§ÑÁêÜÊú∫Âà∂Áªô‰∫∫‰∏ÄÁßçÂºÇÊ≠•ÁöÑÂÅáË±°„ÄÇ ÂºÇÊ≠•‰ª£Á†ÅÂíåÂéüÁîü‰∫ã‰ª∂‰∏≠ 123456789componentDidMount() &#123; setTimeout(() =&gt; &#123; console.log(&apos;Ë∞ÉÁî®setState&apos;); this.setState(&#123; index: this.state.index + 1 &#125;) console.log(&apos;state&apos;, this.state.index); &#125;, 0);&#125; Â¶Ç‰∏äÈù¢ÁöÑ‰ª£Á†ÅÔºåÂΩìÊàë‰ª¨Âú®ÂºÇÊ≠•‰ª£Á†Å‰∏≠Ë∞ÉÁî® setState Êó∂ÔºåÊ†πÊçÆ JavaScript ÁöÑÂºÇÊ≠•Êú∫Âà∂Ôºå‰ºöÂ∞ÜÂºÇÊ≠•‰ª£Á†ÅÂÖàÊöÇÂ≠òÔºåÁ≠âÊâÄÊúâÂêåÊ≠•‰ª£Á†ÅÊâßË°åÂÆåÊØïÂêéÂú®ÊâßË°åÔºåËøôÊó∂ React ÁöÑÊâπÂ§ÑÁêÜÊú∫Âà∂Â∑≤ÁªèËµ∞ÂÆåÔºåÂ§ÑÁêÜÊ†áÂøóËÆæË¢´ËÆæÁΩÆ‰∏∫ falseÔºåËøôÊó∂ÂÜçË∞ÉÁî® setState Âç≥ÂèØÁ´ãÂç≥ÊâßË°åÊõ¥Êñ∞ÔºåÊãøÂà∞Êõ¥Êñ∞ÂêéÁöÑÁªìÊûú„ÄÇ Âú®ÂéüÁîü‰∫ã‰ª∂‰∏≠Ë∞ÉÁî® setState Âπ∂‰∏ç‰ºöÂá∫Âèë React ÁöÑÊâπÂ§ÑÁêÜÊú∫Âà∂ÔºåÊâÄ‰ª•Á´ãÂç≥ËÉΩÊãøÂà∞ÊúÄÊñ∞ÁªìÊûú„ÄÇ ÊúÄ‰Ω≥ÂÆûË∑µ setState ÁöÑÁ¨¨‰∫å‰∏™ÂèÇÊï∞Êé•Êî∂‰∏Ä‰∏™ÂáΩÊï∞ÔºåËØ•ÂáΩÊï∞‰ºöÂú® React ÁöÑÊâπÂ§ÑÁêÜÊú∫Âà∂ÂÆåÊàê‰πãÂêéË∞ÉÁî®ÔºåÊâÄ‰ª•‰Ω†ÊÉ≥Âú®Ë∞ÉÁî® setState ÂêéÁ´ãÂç≥Ëé∑ÂèñÊõ¥Êñ∞ÂêéÁöÑÂÄºÔºåËØ∑Âú®ËØ•ÂõûË∞ÉÂáΩÊï∞‰∏≠Ëé∑Âèñ„ÄÇ 123this.setState(&#123; index: this.state.index + 1 &#125;, () =&gt; &#123; console.log(this.state.index);&#125;) ÈìæÊé•ÔºöÁî±ÂÆûÈôÖÈóÆÈ¢òÊé¢Á©∂ setState ÁöÑÊâßË°åÊú∫Âà∂„ÄÇ # 3. ‰∏∫‰ªÄ‰πàÊúâÊó∂ËøûÁª≠Â§öÊ¨° setState Âè™Êúâ‰∏ÄÊ¨°ÁîüÊïàÔºü ‰æãÂ¶Ç‰∏ãÈù¢ÁöÑ‰ª£Á†ÅÔºå‰∏§Ê¨°ÊâìÂç∞Âá∫ÁöÑÁªìÊûúÊòØÁõ∏ÂêåÁöÑÔºö 12345678componentDidMount() &#123; this.setState(&#123; index: this.state.index + 1 &#125;, () =&gt; &#123; console.log(this.state.index); &#125;) this.setState(&#123; index: this.state.index + 1 &#125;, () =&gt; &#123; console.log(this.state.index); &#125;)&#125; ÂéüÂõ†Â∞±ÊòØ React ‰ºöÊâπÂ§ÑÁêÜÊú∫Âà∂‰∏≠Â≠òÂÇ®ÁöÑÂ§ö‰∏™ setState ËøõË°åÂêàÂπ∂ÔºåÊù•Áúã‰∏ã React Ê∫êÁ†Å‰∏≠ÁöÑ _assign ÂáΩÊï∞ÔºåÁ±ª‰ºº‰∫é Object ÁöÑ assignÔºö Â¶ÇÊûú‰º†ÂÖ•ÁöÑÊòØÂØπË±°ÔºåÂæàÊòéÊòæ‰ºöË¢´ÂêàÂπ∂Êàê‰∏ÄÊ¨°ÔºåÊâÄ‰ª•‰∏äÈù¢ÁöÑ‰ª£Á†Å‰∏§Ê¨°ÊâìÂç∞ÁöÑÁªìÊûúÊòØÁõ∏ÂêåÁöÑÔºö 12345Object.assign( nextState,&#123;index: state.index+ 1&#125;,&#123;index: state.index+ 1&#125;) Ê≥®ÊÑèÔºå assign ÂáΩÊï∞‰∏≠ÂØπÂáΩÊï∞ÂÅö‰∫ÜÁâπÊÆäÂ§ÑÁêÜÔºåÂ§ÑÁêÜÁ¨¨‰∏Ä‰∏™ÂèÇÊï∞‰º†ÂÖ•ÁöÑÊòØÂáΩÊï∞ÔºåÂáΩÊï∞ÁöÑÂèÇÊï∞ preState ÊòØÂâç‰∏ÄÊ¨°ÂêàÂπ∂ÂêéÁöÑÁªìÊûúÔºåÊâÄ‰ª•ËÆ°ÁÆóÁªìÊûúÊòØÂáÜÁ°ÆÁöÑÔºö 123456789101112componentDidMount() &#123; this.setState((state, props) =&gt; (&#123; index: state.index + 1 &#125;), () =&gt; &#123; console.log(this.state.index); &#125;) this.setState((state, props) =&gt; (&#123; index: state.index + 1 &#125;), () =&gt; &#123; console.log(this.state.index); &#125;)&#125; ÊâÄ‰ª•‰∏äÈù¢ÁöÑ‰ª£Á†Å‰∏§Ê¨°ÊâìÂç∞ÁöÑÁªìÊûúÊòØ‰∏çÂêåÁöÑ„ÄÇ ÊúÄ‰Ω≥ÂÆûË∑µ React ‰ºöÂØπÂ§öÊ¨°ËøûÁª≠ÁöÑ setState ËøõË°åÂêàÂπ∂ÔºåÂ¶ÇÊûú‰Ω†ÊÉ≥Á´ãÂç≥‰ΩøÁî®‰∏äÊ¨° setState ÂêéÁöÑÁªìÊûúËøõË°å‰∏ã‰∏ÄÊ¨° setStateÔºåÂèØ‰ª•ËÆ© setState Êé•Êî∂‰∏Ä‰∏™ÂáΩÊï∞ËÄå‰∏çÊòØ‰∏Ä‰∏™ÂØπË±°„ÄÇËøô‰∏™ÂáΩÊï∞Áî®‰∏ä‰∏Ä‰∏™ state ‰Ωú‰∏∫Á¨¨‰∏Ä‰∏™ÂèÇÊï∞ÔºåÂ∞ÜÊ≠§Ê¨°Êõ¥Êñ∞Ë¢´Â∫îÁî®Êó∂ÁöÑ props ÂÅö‰∏∫Á¨¨‰∫å‰∏™ÂèÇÊï∞„ÄÇ # 4. ËôöÊãü Dom ÊØîÊôÆÈÄö Dom Êõ¥Âø´ÂêóÔºü ÂæàÂ§öÊñáÁ´†ËØ¥ VitrualDom ÂèØ‰ª•ÊèêÂçáÊÄßËÉΩÔºåËøô‰∏ÄËØ¥Ê≥ïÂÆûÈôÖ‰∏äÊòØÂæàÁâáÈù¢ÁöÑ„ÄÇ Áõ¥Êé•Êìç‰Ωú DOM ÊòØÈùûÂ∏∏ËÄóË¥πÊÄßËÉΩÁöÑÔºåËøô‰∏ÄÁÇπÊØãÂ∫∏ÁΩÆÁñë„ÄÇ‰ΩÜÊòØ React ‰ΩøÁî® VitrualDom ‰πüÊòØÊó†Ê≥ïÈÅøÂÖçÊìç‰Ωú DOM ÁöÑ„ÄÇ Â¶ÇÊûúÊòØÈ¶ñÊ¨°Ê∏≤ÊüìÔºå VitrualDom ‰∏çÂÖ∑Êúâ‰ªª‰Ωï‰ºòÂäøÔºåÁîöËá≥ÂÆÉË¶ÅËøõË°åÊõ¥Â§öÁöÑËÆ°ÁÆóÔºåÊ∂àËÄóÊõ¥Â§öÁöÑÂÜÖÂ≠ò„ÄÇ VitrualDom ÁöÑ‰ºòÂäøÂú®‰∫é React ÁöÑ Diff ÁÆóÊ≥ïÂíåÊâπÂ§ÑÁêÜÁ≠ñÁï•Ôºå React Âú®È°µÈù¢Êõ¥Êñ∞‰πãÂâçÔºåÊèêÂâçËÆ°ÁÆóÂ•Ω‰∫ÜÂ¶Ç‰ΩïËøõË°åÊõ¥Êñ∞ÂíåÊ∏≤Êüì DOM„ÄÇÂÆûÈôÖ‰∏äÔºåËøô‰∏™ËÆ°ÁÆóËøáÁ®ãÊàë‰ª¨Âú®Áõ¥Êé•Êìç‰Ωú DOM Êó∂Ôºå‰πüÊòØÂèØ‰ª•Ëá™Â∑±Âà§Êñ≠ÂíåÂÆûÁé∞ÁöÑÔºå‰ΩÜÊòØ‰∏ÄÂÆö‰ºöËÄóË¥πÈùûÂ∏∏Â§öÁöÑÁ≤æÂäõÂíåÊó∂Èó¥ÔºåËÄå‰∏îÂæÄÂæÄÊàë‰ª¨Ëá™Â∑±ÂÅöÁöÑÊòØ‰∏çÂ¶Ç React Â•ΩÁöÑ„ÄÇÊâÄ‰ª•ÔºåÂú®Ëøô‰∏™ËøáÁ®ã‰∏≠ React Â∏ÆÂä©Êàë‰ª¨ &quot;ÊèêÂçá‰∫ÜÊÄßËÉΩ&quot;„ÄÇ ÊâÄ‰ª•ÔºåÊàëÊõ¥ÂÄæÂêë‰∫éËØ¥Ôºå VitrualDom Â∏ÆÂä©Êàë‰ª¨ÊèêÈ´ò‰∫ÜÂºÄÂèëÊïàÁéáÔºåÂú®ÈáçÂ§çÊ∏≤ÊüìÊó∂ÂÆÉÂ∏ÆÂä©Êàë‰ª¨ËÆ°ÁÆóÂ¶Ç‰ΩïÊõ¥È´òÊïàÁöÑÊõ¥Êñ∞ÔºåËÄå‰∏çÊòØÂÆÉÊØî DOM Êìç‰ΩúÊõ¥Âø´„ÄÇ # 5. ‰∏∫‰ªÄ‰πà‰ª£Á†Å‰∏≠‰∏ÄÂÆöË¶ÅÂºïÂÖ• ReactÔºü JSX Âè™ÊòØ‰∏∫ React.createElement (component,props,‚Ä¶children) ÊñπÊ≥ïÊèê‰æõÁöÑËØ≠Ê≥ïÁ≥ñ„ÄÇ ÊâÄÊúâÁöÑ JSX ‰ª£Á†ÅÊúÄÂêéÈÉΩ‰ºöËΩ¨Êç¢Êàê React.createElement (‚Ä¶)Ôºå Babel Â∏ÆÂä©Êàë‰ª¨ÂÆåÊàê‰∫ÜËøô‰∏™ËΩ¨Êç¢ÁöÑËøáÁ®ã„ÄÇ ÊâÄ‰ª•‰ΩøÁî®‰∫Ü JSX ÁöÑ‰ª£Á†ÅÈÉΩÂøÖÈ°ªÂºïÂÖ• React„ÄÇ # 6. ‰∏∫‰ªÄ‰πà React ÁªÑ‰ª∂È¶ñÂ≠óÊØçÂøÖÈ°ªÂ§ßÂÜôÔºü babel Âú®ÁºñËØëÊó∂‰ºöÂà§Êñ≠ JSX ‰∏≠ÁªÑ‰ª∂ÁöÑÈ¶ñÂ≠óÊØçÔºåÂΩìÈ¶ñÂ≠óÊØç‰∏∫Â∞èÂÜôÊó∂ÔºåÂÖ∂Ë¢´ËÆ§ÂÆö‰∏∫ÂéüÁîü DOM Ê†áÁ≠æÔºå createElement ÁöÑÁ¨¨‰∏Ä‰∏™ÂèòÈáèË¢´ÁºñËØë‰∏∫Â≠óÁ¨¶‰∏≤ÔºõÂΩìÈ¶ñÂ≠óÊØç‰∏∫Â§ßÂÜôÊó∂ÔºåÂÖ∂Ë¢´ËÆ§ÂÆö‰∏∫Ëá™ÂÆö‰πâÁªÑ‰ª∂Ôºå createElement ÁöÑÁ¨¨‰∏Ä‰∏™ÂèòÈáèË¢´ÁºñËØë‰∏∫ÂØπË±°„ÄÇ # 7. React Âú®Ê∏≤ÊüìÁúüÂÆû Dom Êó∂ÂÅö‰∫ÜÂì™‰∫õÊÄßËÉΩ‰ºòÂåñÔºü Âú® IEÔºà8-11ÔºâÂíå Edge ÊµèËßàÂô®‰∏≠Ôºå‰∏Ä‰∏™‰∏Ä‰∏™ÊèíÂÖ•Êó†Â≠êÂ≠ôÁöÑËäÇÁÇπÔºåÊïàÁéáË¶ÅËøúÈ´ò‰∫éÊèíÂÖ•‰∏ÄÊï¥‰∏™Â∫èÂàóÂåñÂÆåÊï¥ÁöÑËäÇÁÇπÊ†ë„ÄÇ React ÈÄöËøá lazyTreeÔºåÂú® IEÔºà8-11ÔºâÂíå Edge ‰∏≠ËøõË°åÂçï‰∏™ËäÇÁÇπ‰æùÊ¨°Ê∏≤ÊüìËäÇÁÇπÔºåËÄåÂú®ÂÖ∂‰ªñÊµèËßàÂô®‰∏≠ÂàôÈ¶ñÂÖàÂ∞ÜÊï¥‰∏™Â§ßÁöÑ DOM ÁªìÊûÑÊûÑÂª∫Â•ΩÔºåÁÑ∂ÂêéÂÜçÊï¥‰ΩìÊèíÂÖ•ÂÆπÂô®„ÄÇ Âπ∂‰∏îÔºåÂú®ÂçïÁã¨Ê∏≤ÊüìËäÇÁÇπÊó∂Ôºå React ËøòËÄÉËôë‰∫Ü fragment Á≠âÁâπÊÆäËäÇÁÇπÔºåËøô‰∫õËäÇÁÇπÂàô‰∏ç‰ºö‰∏Ä‰∏™‰∏Ä‰∏™ÊèíÂÖ•Ê∏≤Êüì„ÄÇ # 8. Hook ÊúâÂì™‰∫õ‰ºòÂäøÔºü ÂáèÂ∞ëÁä∂ÊÄÅÈÄªËæëÂ§çÁî®ÁöÑÈ£éÈô© Hook Âíå Mixin Âú®Áî®Ê≥ï‰∏äÊúâ‰∏ÄÂÆöÁöÑÁõ∏‰ºº‰πãÂ§ÑÔºå‰ΩÜÊòØ Mixin ÂºïÂÖ•ÁöÑÈÄªËæëÂíåÁä∂ÊÄÅÊòØÂèØ‰ª•Áõ∏‰∫íË¶ÜÁõñÁöÑÔºåËÄåÂ§ö‰∏™ Hook ‰πãÈó¥‰∫í‰∏çÂΩ±ÂìçÔºåËøôËÆ©Êàë‰ª¨‰∏çÈúÄË¶ÅÂú®Êää‰∏ÄÈÉ®ÂàÜÁ≤æÂäõÊîæÂú®Èò≤Ê≠¢ÈÅøÂÖçÈÄªËæëÂ§çÁî®ÁöÑÂÜ≤Á™Å‰∏ä„ÄÇÂú®‰∏çÈÅµÂÆàÁ∫¶ÂÆöÁöÑÊÉÖÂÜµ‰∏ã‰ΩøÁî® HOC ‰πüÊúâÂèØËÉΩÂ∏¶Êù•‰∏ÄÂÆöÂÜ≤Á™ÅÔºåÊØîÂ¶Ç props Ë¶ÜÁõñÁ≠âÁ≠âÔºå‰ΩøÁî® Hook ÂàôÂèØ‰ª•ÈÅøÂÖçËøô‰∫õÈóÆÈ¢ò„ÄÇ ÈÅøÂÖçÂú∞Áã±ÂºèÂµåÂ•ó Â§ßÈáè‰ΩøÁî® HOC ÁöÑÊÉÖÂÜµ‰∏ãËÆ©Êàë‰ª¨ÁöÑ‰ª£Á†ÅÂèòÂæóÂµåÂ•óÂ±ÇÁ∫ßÈùûÂ∏∏Ê∑±Ôºå‰ΩøÁî® HOCÔºåÊàë‰ª¨ÂèØ‰ª•ÂÆûÁé∞ÊâÅÂπ≥ÂºèÁöÑÁä∂ÊÄÅÈÄªËæëÂ§çÁî®ÔºåËÄåÈÅøÂÖç‰∫ÜÂ§ßÈáèÁöÑÁªÑ‰ª∂ÂµåÂ•ó„ÄÇ ËÆ©ÁªÑ‰ª∂Êõ¥ÂÆπÊòìÁêÜËß£ Âú®‰ΩøÁî® class ÁªÑ‰ª∂ÊûÑÂª∫Êàë‰ª¨ÁöÑÁ®ãÂ∫èÊó∂Ôºå‰ªñ‰ª¨ÂêÑËá™Êã•ÊúâËá™Â∑±ÁöÑÁä∂ÊÄÅÔºå‰∏öÂä°ÈÄªËæëÁöÑÂ§çÊùÇ‰ΩøËøô‰∫õÁªÑ‰ª∂ÂèòÂæóË∂äÊù•Ë∂äÂ∫ûÂ§ßÔºåÂêÑ‰∏™ÁîüÂëΩÂë®Êúü‰∏≠‰ºöË∞ÉÁî®Ë∂äÊù•Ë∂äÂ§öÁöÑÈÄªËæëÔºåË∂äÊù•Ë∂äÈöæ‰ª•Áª¥Êä§„ÄÇ‰ΩøÁî® HookÔºåÂèØ‰ª•ËÆ©‰Ω†Êõ¥Â§ßÈôêÂ∫¶ÁöÑÂ∞ÜÂÖ¨Áî®ÈÄªËæëÊäΩÁ¶ªÔºåÂ∞Ü‰∏Ä‰∏™ÁªÑ‰ª∂ÂàÜÂâ≤ÊàêÊõ¥Â∞èÁöÑÂáΩÊï∞ÔºåËÄå‰∏çÊòØÂº∫Âà∂Âü∫‰∫éÁîüÂëΩÂë®ÊúüÊñπÊ≥ïËøõË°åÂàÜÂâ≤„ÄÇ ‰ΩøÁî®ÂáΩÊï∞‰ª£Êõø class Áõ∏ÊØîÂáΩÊï∞ÔºåÁºñÂÜô‰∏Ä‰∏™ class ÂèØËÉΩÈúÄË¶ÅÊéåÊè°Êõ¥Â§öÁöÑÁü•ËØÜÔºåÈúÄË¶ÅÊ≥®ÊÑèÁöÑÁÇπ‰πüË∂äÂ§öÔºåÊØîÂ¶Ç this ÊåáÂêë„ÄÅÁªëÂÆö‰∫ã‰ª∂Á≠âÁ≠â„ÄÇÂè¶Â§ñÔºåËÆ°ÁÆóÊú∫ÁêÜËß£‰∏Ä‰∏™ class ÊØîÁêÜËß£‰∏Ä‰∏™ÂáΩÊï∞Êõ¥Âø´„ÄÇHooks ËÆ©‰Ω†ÂèØ‰ª•Âú® classes ‰πãÂ§ñ‰ΩøÁî®Êõ¥Â§ö React ÁöÑÊñ∞ÁâπÊÄß„ÄÇ]]></content>
      <categories>
        <category>ÂâçÁ´Ø</category>
      </categories>
      <tags>
        <tag>react</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Antv G2 4.0+ÊäÄÂ∑ß]]></title>
    <url>%2F2020%2F08%2F03%2F4-0-%E6%8A%80%E5%B7%A7%2F</url>
    <content type="text"><![CDATA[AntV ÊòØËöÇËöÅÈáëÊúçÂÖ®Êñ∞‰∏Ä‰ª£Êï∞ÊçÆÂèØËßÜÂåñËß£ÂÜ≥ÊñπÊ°àÔºåËá¥Âäõ‰∫éÊèê‰æõ‰∏ÄÂ•óÁÆÄÂçïÊñπ‰æø„ÄÅ‰∏ì‰∏öÂèØÈù†„ÄÅÊó†ÈôêÂèØËÉΩÁöÑÊï∞ÊçÆÂèØËßÜÂåñÊúÄ‰Ω≥ÂÆûË∑µ„ÄÇÁΩëÂùÄÔºöhttps://antv.vision/zh„ÄÇ G2 ‰∏ÄÂ•óÈù¢ÂêëÂ∏∏ËßÑÁªüËÆ°ÂõæË°®Ôºå‰ª•Êï∞ÊçÆÈ©±Âä®ÁöÑÈ´ò‰∫§‰∫íÂèØËßÜÂåñÂõæÂΩ¢ËØ≠Ê≥ïÔºåÂÖ∑ÊúâÈ´òÂ∫¶ÁöÑÊòìÁî®ÊÄßÂíåÊâ©Â±ïÊÄß„ÄÇ‰ΩøÁî® G2Ôºå‰Ω†ÂèØ‰ª•Êó†ÈúÄÂÖ≥Ê≥®ÂõæË°®ÂêÑÁßçÁπÅÁêêÁöÑÂÆûÁé∞ÁªÜËäÇÔºå‰∏ÄÊù°ËØ≠Âè•Âç≥ÂèØ‰ΩøÁî® Canvas Êàñ SVG ÊûÑÂª∫Âá∫ÂêÑÁßçÂêÑÊ†∑ÁöÑÂèØ‰∫§‰∫íÁöÑÁªüËÆ°ÂõæË°®„ÄÇÁΩëÂùÄÔºöhttps://g2.antv.vision/zh„ÄÇ # 1. ËÆæÁΩÆÂõæ‰æã 123456789101112131415legend(&#123; position: &apos;top-left&apos;, offsetX: 200, itemName: &#123; //ËÆæÁΩÆÂõæ‰æãÊñáÊú¨ style: &#123; fontSize: 14, fill: &apos;#5F717D&apos;, x: 22, &#125;, &#125;, marker: &#123; //ËÆæÁΩÆÂõæ‰æãÊ†áÊ≥®Ê†∑Âºè style: &#123; r: 6, &#125;, &#125;, &#125;); ÂÖ∑‰Ωì style Â±ûÊÄßÂèÇËÄÉÔºöhttps://g2.antv.vision/zh/docs/api/interfaces/shapemarkerattrs„ÄÇ # 2. Ëá™ÂÆö‰πâÂõæ‰æãÁÇπÂáª‰∫ã‰ª∂ÔºåÈöêËóèÂØπÂ∫îÂõæÂΩ¢ 1234567891011121314chartRef.current.on(&apos;legend:click&apos;, (ev: any) =&gt; &#123; const &#123; unchecked, value &#125; = ev.target.cfg.delegateObject.item; const geoms = chartRef.current.geometries; for (let i = 0; i &lt; geoms.length; i++) &#123; const geom = geoms[i]; if (geom.getYScale().field === value) &#123; if (!unchecked) &#123; geom.show(); &#125; else &#123; geom.hide(); &#125; &#125; &#125;&#125;);]]></content>
      <categories>
        <category>ÂâçÁ´Ø</category>
      </categories>
      <tags>
        <tag>react</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ÊâãÊú∫Á´ØË∞ÉÁî®ÁôæÂ∫¶ÂõæÁâáËØÜÂà´API]]></title>
    <url>%2F2019%2F08%2F15%2F%E6%89%8B%E6%9C%BA%E7%AB%AF%E8%B0%83%E7%94%A8%E7%99%BE%E5%BA%A6%E5%9B%BE%E7%89%87%E8%AF%86%E5%88%ABAPI%2F</url>
    <content type="text"><![CDATA[Âõ†‰∏∫‰∏öÂä°ÈúÄÊ±ÇÔºåÊúâËΩ¶ÁâåËØÜÂà´ÁöÑÂäüËÉΩÔºåÊâÄ‰ª•‰∏äÁΩëÊâæ‰∫ÜÂõæÁâáËØÜÂà´ÁöÑËß£ÂÜ≥ÊñπÊ°àÔºåÂèëÁé∞ BAT ÈÉΩÊúâÔºå‰ΩÜÊòØÁôæÂ∫¶ÁöÑÂÖçË¥πÊ¨°Êï∞ÊúÄÂ§öÔºåÂØπ‰∏öÂä°Êù•ËØ¥Â∞±Áõ∏ÂΩì‰∫éÂÖ®ÂÖçË¥π‰∫ÜÔºåÊâÄ‰ª•Â∞±ÈÄâÊã©‰∫ÜÁôæÂ∫¶ÁöÑ APIÔºåüòÑ„ÄÇÂÆòÊñπÊñáÊ°£Âú∞ÂùÄÔºöhttps://ai.baidu.com/docs#/OCR-API/top„ÄÇ # 1. ÊãçÁÖßËé∑ÂèñÂõæÁâá È°πÁõÆÊòØ H5 APPÔºåÊãçÁÖßÁî®‰∫Ü H5 + ÁöÑ api„ÄÇ 1234567891011121314151617//ÊãçÁÖßcaptureImage() &#123; let _this = this; var cmr = plus.camera.getCamera(); var res = cmr.supportedImageResolutions[0]; //ÊëÑÂÉèÂ§¥ÊîØÊåÅÁöÑÊãçÁÖßÂàÜËæ®Áéá var fmt = cmr.supportedImageFormats[0]; //ÊëÑÂÉèÂ§¥ÊîØÊåÅÁöÑÊãçÁÖßÊñá‰ª∂Ê†ºÂºè cmr.captureImage((path)=&gt; &#123; _this.convertUrl(path); &#125;, function(error) &#123; console.log(&quot;Capture image failed: &quot; + error.message); &#125;, &#123; resolution: res, format: fmt &#125; );&#125;, # 2. ÂõæÁâáËΩ¨ base64 Ê†πÊçÆÂÆòÊñπÊñáÊ°£ÔºåÂõæÁâáË¶ÅËΩ¨Êàê base64 Êï∞ÊçÆ„ÄÇ 123456789101112131415161718192021222324//ËΩ¨Êç¢ÂõæÁâáË∑ØÂæÑÂπ∂Ë∞ÉÁî®ÊñπÊ≥ïËØÜÂà´convertUrl(path)&#123; let _this = this; //ËΩ¨Êç¢‰∏∫Êú¨Âú∞Êñá‰ª∂Ë∑ØÂæÑ plus.io.resolveLocalFileSystemURL(path, function(entry) &#123; var localurl = entry.toLocalURL(); var reader = new plus.io.FileReader(); reader.onloadend = function (e) &#123; var imgData = e.target.result.replace(&quot;data:image/jpeg;base64,&quot;, &quot;&quot;).replace(&quot;data:image/png;base64,&quot;, &quot;&quot;);//base64ÂõæÁâá ocr.startOCR(imgData, res=&gt;&#123; var number = res.words_result.number; if(number.length == 7)&#123; uni.showToast(&#123; title: &quot;ËØÜÂà´ÊàêÂäü&quot;, icon: &quot;none&quot; &#125;) var values = number.split(&quot;&quot;); _this.result = values; &#125; &#125;); &#125;; reader.readAsDataURL(localurl); &#125;);&#125;, # 3. Ëé∑Âèñ Access Token Â•Ω‰∫ÜÔºåÁé∞Âú®ÂõæÁâáÊï∞ÊçÆÊúâ‰∫ÜÔºåÂú®Ë∞ÉÁôæÂ∫¶ËΩ¶ÁâåËØÜÂà´ API ‰πãÂâçËøòË¶ÅÂÖàËé∑Âèñ Access Token, ËÄåË¶ÅËé∑Âèñ Access TokenÔºåÂèàÂæóÂÖàÁôªËÆ∞‰∏Ä‰∏™Â∫îÁî®ÔºåÂèñÂà∞Â∫îÁî®ÁöÑ API KEY Âíå SECRET KEY„ÄÇ 12345678910111213141516171819202122232425//Ëé∑Âèñaccess_tokenfunction requestAccessToken(callback) &#123; let params = &#123; grant_type: &apos;client_credentials&apos;, //Âõ∫ÂÆöÂÄº client_id: api_key, //ÁôªËÆ∞Â∫îÁî®ÁöÑAPI KEY client_secret: secret_key //ÁôªËÆ∞Â∫îÁî®ÁöÑSECRET KEY &#125; //networkÊòØÂ∞ÅË£ÖÁöÑajaxËØ∑Ê±ÇÂáΩÊï∞ network.request(&apos;https://aip.baidubce.com/oauth/2.0/token&apos;, params, null, &quot;GET&quot;, res =&gt; &#123; if (res.hasOwnProperty(&apos;access_token&apos;)) &#123; let nowTime = new Date().getTime(); //ËÆ∞ÂΩïÂΩìÂâçËØ∑Ê±ÇÊó∂Èó¥ÊòØ‰∏∫‰∫ÜÂà§Êñ≠access_tokenÊòØÂê¶ËøáÊúü let access_token_obj = &#123; access_token: res.access_token, requestTime: nowTime &#125; uni.setStorageSync(&quot;access_token_obj&quot;, access_token_obj) callback(res.access_token); &#125; else &#123; //Ëé∑Âèñaccess_tokenÂ§±Ë¥• console.log(JSON.stringify(res)); &#125; &#125;);&#125; # 4. Ë∞ÉÁî®ËΩ¶ÁâåËØÜÂà´ API ÂÖàÂà§Êñ≠‰πãÂâçÊòØÂê¶ËØ∑Ê±ÇËøá access_tokenÔºåÂ¶ÇÊûúËØ∑Ê±ÇËøáÂÜçÂà§Êñ≠ access_token ÊòØÂê¶ËøáÊúü„ÄÇ 12345678910111213141516171819202122/** * ÂºÄÂßãËøõË°åÊñáÂ≠óËØÜÂà´Ôºå‰º†ÂÖ•base64ÂõæÁâáÊï∞ÊçÆÂíåÂõûË∞ÉÂáΩÊï∞ */function startOCR(imgData, callback) &#123; console.log(&quot;ÂºÄÂßãËØÜÂà´...&quot;); console.log(&quot;access_tokenÁºìÂ≠òÔºü&quot; + uni.getStorageSync(&quot;access_token_obj&quot;)); if (uni.getStorageSync(&quot;access_token_obj&quot;)) &#123; //Â¶ÇÊûúaccess_tokenÂ∑≤Â≠òÂÖ•ÁºìÂ≠òÔºåË°®Á§∫ËØ∑Ê±ÇËøá let obj = uni.getStorageSync(&quot;access_token_obj&quot;); let nowTime = new Date().getTime(); if ((nowTime - obj.requestTime) &gt;= 1000 * 3600 * 24 * 30) &#123; //Â¶ÇÊûú‰∏äÊ¨°ËØ∑Ê±ÇÊó∂Èó¥Âú®30Â§©‰πãÂâçÔºåÂàôÈúÄË¶ÅÈáçÊñ∞Ëé∑Âèñaccess_token requestAccessToken(res =&gt; &#123; recognition(res, imgData, callback); &#125;); &#125; else &#123; recognition(obj.access_token, imgData, callback); &#125; &#125; else &#123; //ÁºìÂ≠ò‰∏≠Ê≤°Êúâaccess_token requestAccessToken(res =&gt; &#123; recognition(res, imgData, callback); &#125;); &#125;&#125; 123456789101112131415161718//ËØÜÂà´‰∏≠...Ë∞ÉÁî®ÊñáÂ≠óËØÜÂà´API,‰º†ÂÖ•ÂõæÁâáÊï∞ÊçÆÂèÇÊï∞function recognition(access_token, imgData, callback) &#123; let params = &#123; access_token: access_token, image: imgData &#125;; let header = &#123; &apos;Content-Type&apos;: &apos;application/x-www-form-urlencoded&apos; //ËØ∑Ê±ÇÂ§¥ËÆæÁΩÆÊàêÂõ∫ÂÆöÂÄº &#125;; network.request(&apos;https://aip.baidubce.com/rest/2.0/ocr/v1/license_plate&apos;, params, header, &quot;POST&quot;, res =&gt; &#123; callback(res); &#125;, err =&gt; &#123; uni.showToast(&#123; title: &quot;ËØ∑ÂØπÂáÜËΩ¶ÁâåÈáçÊñ∞ÊãçÁÖß&quot;, icon: &quot;none&quot; &#125;) &#125;, &quot;ËØÜÂà´‰∏≠...&quot;);&#125; Âè™Ë¶ÅÂèÇÊï∞ÈÉΩÊ≤°ÊúâÈóÆÈ¢òÔºåÈÇ£‰πàÊé•‰∏ãÊù•Â∞±ËÉΩÂæóÂà∞ËøîÂõûÁªìÊûúÔºåËøîÂõûËΩ¶Áâå‰ø°ÊÅØÔºàËΩ¶ÁâåÂè∑„ÄÅËΩ¶ÁâåÈ¢úËâ≤Á≠âÁ≠âÔºâ„ÄÇ Ë∞ÉÁî®ÂÖ∂‰ªñÂú∫ÊôØÁöÑÂõæÁâáËØÜÂà´ API ÂêåÁêÜ„ÄÇ]]></content>
      <categories>
        <category>ÂâçÁ´Ø</category>
      </categories>
      <tags>
        <tag>H5 APP</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ÂæÆ‰ø°Â∞èÁ®ãÂ∫èÁúÅÂ∏ÇÂå∫‰∏âÁ∫ßËÅîÂä®‰ºòÂåñÁâà]]></title>
    <url>%2F2019%2F07%2F16%2F%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E7%9C%81%E5%B8%82%E5%8C%BA%E4%B8%89%E7%BA%A7%E8%81%94%E5%8A%A8%E4%BC%98%E5%8C%96%E7%89%88%2F</url>
    <content type="text"><![CDATA[‰ºòÂåñÁâàÁöÑÁúÅÂ∏ÇÂå∫ÈÄâÊã©Âô®ÔºåÊõ¥ÁÆÄÂåñÁöÑ Js Êï∞ÊçÆÔºåÊñπ‰æøËæìÂá∫‰ª•ÂèäËØªÂèñÊòæÁ§∫„ÄÇjs Âú∞ÂùÄÔºöÂüéÂ∏ÇÊï∞ÊçÆ js„ÄÇ È°µÈù¢ÁªÑ‰ª∂Ôºö 123&lt;picker mode=&quot;multiSelector&quot; bindchange=&quot;bindMultiPickerChange&quot; bindcolumnchange=&quot;bindMultiPickerColumnChange&quot; value=&quot;&#123;&#123;citiesIndex&#125;&#125;&quot; range=&quot;&#123;&#123;cityArray&#125;&#125;&quot; range-key=&quot;name&quot;&gt; &lt;/picker&gt; js ‰ºòÂåñÂêéÊó†ÈúÄÊîæÊúçÂä°Âô®ËØ∑Ê±ÇÔºåÊîæÊú¨Âú∞Âç≥ÂèØ„ÄÇ # 1. Âä†ËΩΩÂüéÂ∏ÇÊï∞ÊçÆ 1var array = require(&apos;../../../utils/cityData.js&apos;).cityData; # 2. ÈÄâÊã©Âô®Êï∞ÊçÆÂàùÂßãÂåñ ÂàùÂßãÂåñÈÄâÊã©Âô®Êï∞ÊçÆÔºåÈªòËÆ§ÈÉΩÈÄâ‰∏≠Á¨¨‰∏ÄÈ°π„ÄÇ 123456789101112131415161718192021222324252627282930let cityArray = [ [], [], []];for (let x in array[&quot;86&quot;]) &#123; //Â≠òÂÖ•ÁúÅ cityArray[0].push(&#123; name: array[&quot;86&quot;][x], code: x &#125;);&#125;for (let y in array[cityArray[0][0].code]) &#123; //Â≠òÂÖ•Â∏ÇÔºåÈªòËÆ§ÂÖ≥ËÅîÁ¨¨‰∏Ä‰∏™ÁúÅ cityArray[1].push(&#123; name: array[cityArray[0][0].code][y], code: y &#125;);&#125;for (let z in array[cityArray[1][0].code]) &#123; //Â≠òÂÖ•Âå∫ÔºåÈªòËÆ§ÂÖ≥ËÅîÁ¨¨‰∏Ä‰∏™ÁúÅÁöÑÁ¨¨‰∏Ä‰∏™Â∏Ç cityArray[2].push(&#123; name: array[cityArray[1][0].code][z], code: z &#125;);&#125;this.setData(&#123; cityArray: cityArray&#125;); # 3. ÂàóÊªöÂä®‰∫ã‰ª∂ ÊªöÂä®ÈÄâÊã©Âô®ÁöÑÂàóÊó∂Áõ∏Â∫îÁöÑÊï∞ÊçÆÂèòÂåñÔºåËøôÊòØÊúÄÈáçË¶ÅÁöÑÁÇπ„ÄÇ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162//ÂàóÊªöÂä®‰∫ã‰ª∂ bindMultiPickerColumnChange(e) &#123; let selectedIndex = e.detail.value; let cityArray = this.data.cityArray; let list1 = []; //Â≠òÊîæÁ¨¨‰∫åÂàóÊï∞ÊçÆÔºåÂç≥Â∏ÇÁöÑÂàó let list2 = []; //Â≠òÊîæÁ¨¨‰∏âÂàóÊï∞ÊçÆÔºåÂç≥Âå∫ÁöÑÂàó let citiesIndex = []; let pcode = &apos;&apos;, scode = &apos;&apos;; let provinceIndex = this.data.citiesIndex[0]; //ÈÄâ‰∏≠ÁöÑÁúÅÁ¥¢Âºï let cityIndex = this.data.citiesIndex[1]; //ÈÄâ‰∏≠ÁöÑÂ∏ÇÁ¥¢Âºï let areaIndex = this.data.citiesIndex[2]; //ÈÄâ‰∏≠ÁöÑÂå∫Á¥¢Âºï switch (e.detail.column) &#123; case 0: //ÊªöÂä®Á¨¨‰∏ÄÂàó pcode = cityArray[0][selectedIndex].code; for(let x in array[pcode])&#123; list1.push(&#123; name: array[pcode][x], code: x &#125;); &#125; scode = list1[0].code; for(let y in array[scode])&#123; list2.push(&#123; name: array[scode][y], code: y &#125;); &#125; citiesIndex = [selectedIndex, 0, 0, 0]; break; case 1: //ÊªöÂä®Á¨¨‰∫åÂàó list1 = cityArray[1]; scode = list1[selectedIndex].code; for(let x in array[scode])&#123; list2.push(&#123; name: array[scode][x], code: x &#125;); &#125; citiesIndex = [provinceIndex, selectedIndex, 0, 0]; break; case 2: //ÊªöÂä®Á¨¨‰∏âÂàó list1 = cityArray[1]; list2 = cityArray[2]; citiesIndex = [provinceIndex, cityIndex, selectedIndex, 0]; break; &#125; this.setData(&#123; [`cityArray[1]`]: list1, //ÈáçÊñ∞ËµãÂÄºÁ¨¨‰∫åÂàóÊï∞ÁªÑÔºåÂç≥ËÅîÂä®‰∫ÜÂ∏Ç [`cityArray[2]`]: list2, //ÈáçÊñ∞ËµãÂÄºÁ¨¨‰∏âÂàóÊï∞ÁªÑÔºåÂç≥ËÅîÂä®‰∫ÜÂå∫ citiesIndex: citiesIndex, //Êõ¥Êñ∞Á¥¢Âºï &#125;); # 4. ÈÄâÊã©Âô®ÂèòÊõ¥‰∫ã‰ª∂ 12345678910111213141516171819202122//ÈÄâÊã©Âô®ÈÄâÊã©‰∫ã‰ª∂ bindMultiPickerChange(e) &#123; let cityIndex = e.detail.value; let cityArray = this.data.cityArray; let province = cityArray[0][cityIndex[0]].name; let city = cityArray[1][cityIndex[1]].name; let district = cityArray[2][cityIndex[2]].name; //ÈÄâÊã©ÁöÑÂú∞ÂùÄÁºñÁ†Å let areaCode = cityArray[2][cityIndex[2]].code; //ÈÄâÊã©ÁöÑÂú∞ÂùÄÊñáÊú¨ let selectedAddress = &quot;&quot;; selectedAddress = province + city + district; this.setData(&#123; region: selectedAddress, areaCode: areaCode, provinceCode: cityArray[0][cityIndex[0]].code, cityCode: cityArray[1][cityIndex[1]].code &#125;); &#125;, # 5. Ê†πÊçÆ‰º†ËøáÊù•ÁöÑÂÄºÊòæÁ§∫ÁúÅÂ∏ÇÂå∫ ‰øÆÊîπÂàùÂßãÂåñÈÄâÊã©Âô®ÊñπÊ≥ïÔºåÂà§Êñ≠ÂΩì‰øÆÊîπÂú∞ÂùÄÊó∂ËØªÂèñÊòæÁ§∫Â∑≤ÈÄâÊã©ÁöÑÁúÅÂ∏ÇÂå∫„ÄÇ 12345678910111213141516171819202122232425262728293031323334353637383940for (let x in array[&quot;86&quot;]) &#123; //Â≠òÂÖ•ÁúÅ cityArray[0].push(&#123; name: array[&quot;86&quot;][x], code: x &#125;);&#125;if(this.data.address_id != &quot;&quot;)&#123; //ÁºñËæëÂú∞ÂùÄÔºåÊ†πÊçÆ‰º†ËøáÊù•ÁöÑÂú∞ÂùÄÊñáÊú¨ÂíåÁºñÁ†ÅË∞ÉÊï¥ÈÄâÊã©Âô® for (let y in array[provinceCode]) &#123; cityArray[1].push(&#123; name: array[provinceCode][y], code: y &#125;); &#125; for (let z in array[cityCode]) &#123; cityArray[2].push(&#123; name: array[cityCode][z], code: z &#125;); &#125; for(let i = 0,len = cityArray[0].length;i&lt;len;i++)&#123; if (cityArray[0][i].code == provinceCode) &#123; provinceIndex = i; &#125; &#125; for (let j = 0, len = cityArray[1].length; j &lt; len; j++) &#123; if (cityArray[1][j].code == cityCode) &#123; cityIndex = j; &#125; &#125; for (let k = 0, len = cityArray[2].length; k &lt; len; k++) &#123; if (cityArray[2][k].code == areaCode) &#123; districtIndex = k; &#125; &#125;&#125; else &#123; //Ê∑ªÂä†Âú∞ÂùÄ # ÊïàÊûúÔºö]]></content>
      <categories>
        <category>ÂâçÁ´Ø</category>
      </categories>
      <tags>
        <tag>ÂæÆ‰ø°Â∞èÁ®ãÂ∫è</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ÂæÆ‰ø°Â∞èÁ®ãÂ∫èÈïøÊåâÊï∞ÈáèËá™Âä®Âä†Âáè]]></title>
    <url>%2F2019%2F05%2F28%2F%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E9%95%BF%E6%8C%89%E6%95%B0%E9%87%8F%E8%87%AA%E5%8A%A8%E5%8A%A0%E5%87%8F%2F</url>
    <content type="text"><![CDATA[ÂºÄÂèë‰∏Ä‰∏™ÂæÆ‰ø°Â∞èÁ®ãÂ∫èÔºåÊúâË¥≠Áâ©ËΩ¶ÁöÑÂäüËÉΩÔºåÂú®ÊµãËØïÂä†ÂáèË¥≠Áâ©ËΩ¶‰∏≠ÂïÜÂìÅÊï∞ÈáèÊó∂ÔºåÂèëÁé∞ÁÇπ‰∏Ä‰∏ãÂä†‰∏ÄÊàñÂáè‰∏ÄÂ§™ÁÉ¶Ôºå‰∫éÊòØÊ∑ªÂä†‰∫ÜÈïøÊåâËá™Âä®Âä†ÂáèÁöÑÂäüËÉΩ„ÄÇ È°µÈù¢ÁªÑ‰ª∂ 123&lt;text class="minus" catchtouchstart='startMinus' catchtouchend='endMinus' data-index="&#123;&#123;index&#125;&#125;" data-goodIndex="&#123;&#123;goodIndex&#125;&#125;"&gt;-&lt;/text&gt; &#123;&#123;good.num&#125;&#125; &lt;!-- ÂïÜÂìÅÊï∞Èáè --&gt;&lt;text class="add" catchtouchstart='startAdd' catchtouchend='endAdd' data-index="&#123;&#123;index&#125;&#125;" data-goodIndex="&#123;&#123;goodIndex&#125;&#125;"&gt;+&lt;/text&gt; # 1. ÁõëÂê¨Ëß¶Êë∏ÂºÄÂßã‰∫ã‰ª∂ È¶ñÂÖàÁõëÂê¨Ëß¶Êë∏ÂºÄÂßã‰∫ã‰ª∂ touchstartÔºåËÆ∞ÂΩïËß¶Êë∏ÂºÄÂßãÊó∂Èó¥ÔºåÊó∂Èó¥ÂêéÈù¢ÊúâÁî®„ÄÇÈúÄË¶ÅÁî®Âà∞ÂÆöÊó∂Âô®Ôºåtimer Áî®ÁöÑÊòØÈ°µÈù¢ÂÖ®Â±ÄÂèòÈáè„ÄÇ 123456789101112131415161718192021222324//Êåâ‰ΩèÂä†Âè∑‰∏çÂÅúÂú∞Âä†startAdd(e)&#123; startTime = new Date().getTime(); //ËÆ∞ÂΩïËß¶Êë∏ÂºÄÂßãÊó∂Èó¥ let index = e.currentTarget.dataset.index; let goodIndex = e.currentTarget.dataset.goodindex; timer = setInterval(()=&gt;&#123; //ÂÆö‰πâÂÆöÊó∂Âô® this.data.cartList[index].goodList[goodIndex].num++; let sumPrice = 0; let count = 0; this.data.cartList.map((type, index) =&gt; &#123; type.goodList.map((good, index) =&gt; &#123; count += good.num; //ËÆ°ÁÆóÂïÜÂìÅÊï∞Èáè if (good.selected) &#123; //ËÆ°ÁÆóÈÄâ‰∏≠ÂïÜÂìÅ‰ª∑Ê†º sumPrice += good.price * good.num; &#125; &#125;); &#125;); this.setData(&#123; [`cartList[$&#123;index&#125;].goodList[$&#123;goodIndex&#125;]`]: this.data.cartList[index].goodList[goodIndex], //Ë¥≠Áâ©ËΩ¶ÂàóË°®ÂÜÖÂÆπÂ±ÄÈÉ®Âà∑Êñ∞ goodSumPrice: sumPrice, cartNum: count &gt; 99 ? '99+' : count &#125;); &#125;, 100);&#125; # 2. ÁõëÂê¨Ëß¶Êë∏ÁªìÊùü‰∫ã‰ª∂ Ëß¶Êë∏ÁªìÊùüÔºåÂàôÁªìÊùüÊï∞ÈáèÂä†ÂáèÔºåÊ∏ÖÈô§ÂÆöÊó∂Âô®„ÄÇËÆ∞ÂΩïÁªìÊùüÊó∂Èó¥ÔºåÂíåÂºÄÂßãÊó∂Èó¥ÊØîËæÉÔºåÊ†πÊçÆÂæÆ‰ø°Â∞èÁ®ãÂ∫èÂÆòÊñπÊñáÊ°£ÂÆö‰πâÔºöÊâãÊåáËß¶Êë∏ÂêéÔºåË∂ÖËøá 350ms ÂÜçÁ¶ªÂºÄ‰∏∫ÈïøÊåâ„ÄÇÂèç‰πãÂàôËÆ§‰∏∫ÊòØÁÇπÂáªÔºåÊâßË°åÁÇπÂáªÁöÑÈÄªËæëÔºåÂç≥Êï∞ÈáèÂä†‰∏Ä„ÄÇ 12345678//ÁªìÊùüÂä†endAdd(e)&#123; endTime = new Date().getTime(); //ËÆ∞ÂΩïÁªìÊùüÊó∂Èó¥ if((endTime - startTime) &lt; 350000)&#123; this.clickAdd(e); &#125; clearInterval(timer);&#125; ÁÇπÂáª‰∫ã‰ª∂ÈÄªËæëÔºö 123456789101112131415161718192021//ÁÇπÂáªÂä†Âè∑clickAdd(e)&#123; let index = e.currentTarget.dataset.index; let goodIndex = e.currentTarget.dataset.goodindex; this.data.cartList[index].goodList[goodIndex].num ++; let sumPrice = 0; let count = 0; this.data.cartList.map((type, index) =&gt; &#123; type.goodList.map((good, index) =&gt; &#123; count += good.num; if (good.selected) &#123; sumPrice += good.price * good.num; &#125; &#125;); &#125;); this.setData(&#123; [`cartList[$&#123;index&#125;].goodList[$&#123;goodIndex&#125;]`]: this.data.cartList[index].goodList[goodIndex], goodSumPrice: sumPrice, cartNum: count&gt;99?'99+':count &#125;);&#125; ‰πãÊâÄ‰ª•Ë¶ÅÂà§Êñ≠ÊòØÈïøÊåâËøòÊòØÁÇπÂáªÊòØÂõ†‰∏∫Âú®Ê†áÁ≠æÂÖÉÁ¥†‰∏äÂÆö‰πâ‰∫ÜËß¶Êë∏ÂºÄÂßã‰∫ã‰ª∂ÂêéÔºåtap ‰∫ã‰ª∂Â∞±‰∏çÂÜçËß¶ÂèëÔºåÊâÄ‰ª•ÈúÄË¶ÅÊâãÂä®Ë∞ÉÁî®ÁÇπÂáªÊñπÊ≥ï„ÄÇ ÂáèÂè∑ÂêåÁêÜÔºåÈúÄË¶ÅÊ≥®ÊÑèÊï∞ÈáèÂáèÂà∞ 0 Êó∂ÁöÑÊìç‰ΩúÔºåÊàëÁöÑÈÄªËæëÊòØÈïøÊåâÊï∞ÈáèÂáèÂà∞‰∏ÄÂ∞±ÂÅúÊ≠¢ÔºåÂÜçÁÇπÂáªÂáèÂè∑ÂàôÂà†Èô§ËØ•ÂïÜÂìÅ„ÄÇ # ÊïàÊûúÂõæ]]></content>
      <categories>
        <category>ÂâçÁ´Ø</category>
      </categories>
      <tags>
        <tag>ÂæÆ‰ø°Â∞èÁ®ãÂ∫è</tag>
      </tags>
  </entry>
</search>
